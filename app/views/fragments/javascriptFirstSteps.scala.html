@import play.api.libs.json.Json
@import model.JsVars
@import controllers.CachedAssets.hashedPathFor
@import configuration.Config

@(jsVars: JsVars)

<!--[if lte IE 9]>
<script src="@hashedPathFor("javascripts/vendor/polyfills.js")"></script>
<![endif]-->
<!--[if lt IE 9]>
<script src="@hashedPathFor("javascripts/vendor/html5shiv.js")"></script>
<![endif]-->

<script id="gu">
    var guardian = JSON.parse('@Html(Json.stringify(Json.toJson(jsVars)))');
    guardian.analyticsEnabled = true;
    guardian.buildNumber = '@app.BuildInfo.buildNumber';
    guardian.isDev = @(Config.stage == "DEV");
    guardian.isModernBrowser =  (
        'querySelector' in document
        && 'addEventListener' in window
        && 'localStorage' in window
        && 'sessionStorage' in window
        && 'bind' in Function
        && (('XMLHttpRequest' in window && 'withCredentials' in new XMLHttpRequest()) || 'XDomainRequest' in window)
    );
    guardian.pageInfo = {
        channel: 'Subscriber',
        slug: null,
        name: document.title,
        product: 'Subscriber',
        productData: null
    };

    guardian.trackerUrl = '@{Config.trackerUrl}';

    (function(isModern) {
        // We want to add/remove classes to HTML ASAP to avoid FOUC
        var htmlClassNames = ['js-on'];
        document.documentElement.className = document.documentElement.className.replace(/\bjs-off\b/g, '') + ' ' + htmlClassNames.join(' ');
        if (!isModern) {
            document.documentElement.className += ' js-ancient-browser';
        }
    })(guardian.isModernBrowser);
</script>
