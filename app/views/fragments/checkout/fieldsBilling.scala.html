@import com.gu.memsub.Address
@import views.support.AddressOps._
@import views.support.CountryWithCurrency
@import scalaz.syntax.std.boolean._
@import com.gu.subscriptions.ProductPlan
@import views.support.PlanOps._
@import com.gu.subscriptions.ProductList

@(billingAddress: Option[Address], canBeHidden: Boolean, countriesWithCurrency: List[CountryWithCurrency], plan: ProductPlan[ProductList])

@if(canBeHidden) {
  <div class="js-checkout-use-delivery">
    <label class="option">
      <span class="option__input">
        <input type="checkbox" class="js-input js-checkout-delivery-sames-as-billing" @billingAddress.forall(_.isEmpty).fold("checked", "")>
      </span>
      <span class="option__label">
        Bill my delivery address
      </span>
    </label>
  </div>
}

@* ===== Address ===== *@
<div class="js-billing-address @{if(canBeHidden && billingAddress.forall(_.isEmpty)) "is-hidden" else ""}">
@address(billingAddress, "personal.address", countriesWithCurrency, plan)
</div>
